
// Local development fallbacks for payment-related exports used by index.html
export async function processPayment() {
    console.warn('processPayment(): disabled in local environment');
    return { success: false };
}

export function createPaymentModal() {
    // No-op stub to satisfy imports during local dev
}

export function showToast(message) {
    try {
        let toast = document.getElementById('lp-toast');
        if (!toast) {
            toast = document.createElement('div');
            toast.id = 'lp-toast';
            toast.style.position = 'fixed';
            toast.style.bottom = '24px';
            toast.style.right = '24px';
            toast.style.background = 'rgba(30,30,30,0.92)';
            toast.style.color = '#fff';
            toast.style.padding = '10px 14px';
            toast.style.borderRadius = '10px';
            toast.style.fontSize = '13px';
            toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
            toast.style.zIndex = 10000;
            toast.style.opacity = '0';
            toast.style.transition = 'opacity 0.2s ease';
            document.body.appendChild(toast);
        }
        toast.textContent = message || 'Thông báo';
        toast.style.opacity = '1';
        clearTimeout(toast._hideTimeout);
        toast._hideTimeout = setTimeout(() => {
            toast.style.opacity = '0';
        }, 2000);
    } catch (e) {
        console.warn('showToast failed:', e);
    }
}

export function initWebSocket() {
    // No socket connection in local fallback
}

const _0x113742=_0x106d;function _0x1955(){const _0x1b551e=['zgLZCg9Zzq','yxvKAw9mAxn0','CgXHEq','mJfRB0Tqque','zgv0zwn0rgv2AwnLvgLLCG','y3vYCMvUDef1zgLVsw5KzxG','otbryNLuDwi','Bwf4q2fJAgvtAxPL','nty1nJCYDKPLBuHU','yxvKAw9mB2fKzwq','yxvKAw9dywnOzq','yMCTyxvKAw8','yxnZzxrZl211C2LJCY9WzxjMzwn0lM1WmW','D2vIA2L0qxvKAw9dB250zxH0','AgLNAa','C3jJ','AgfYzhDHCMvdB25JDxjYzw5JEq','zxjYB3i','Bg93','zgvSzxrL','y2fUCgXHExrOCM91z2G','ChjLBg9HzenVDw50','y2XLyw51Cef1zgLVq2fJAgu','mty0yuXhwgrY','DgvZDa','mtaZBxbuAeTz','CgXHEu9UBhK','CMvWBgfJzq','yxnZzxrZl211C2LJCY95zxvLBwHVBM1VAw5NyxKUBxaZ','zNjVBq','ywrKrxzLBNrmAxn0zw5LCG','C2v0','DxnLCKfNzw50','y3vYCMvUDef1zgLVvxjS','Cgf1C2u','yxnZzxrZl211C2LJCY9ODwTOB25NlM1WmW','ndGXmJmWtLLoChPi','ChjLBg9Hza','yxnZzxrZl211C2LJCY95zxvLBxjHDg5OAwv1lM1WmW','ndKZndvVDvPivxi','Bg9Hzef1zgLV','zM9YrwfJAa','zgvMyxvSDef1zgLVvxjS','BNvTyMvY','C3bSAxq','AxnbDwrPB0XVywrLza','z2v0','yxnZzxrZl211C2LJCY90Dw5NBMDHExLLDwvTlM1WmW','C2v0DxbbDwrPB0v2zw50CW','mZi5ntrOqxzprgu','yxnZzxrZl211C2LJCY9KDw5NBgfTDhjHAxrPBwfUAgrHDs5TCdm','mtmXnZu1nZboD3LfsM0','ndm4nZy3n3jdANDoBq','Bg9Hza','zw50CMLLCW','mJK0nZaXmJjct3zIANO','yxnZzxrZl211C2LJCY9WAgvWBwf1lM1WmW','AxnqBgf5Aw5N','D2fYBG','lM1WmW','yxvKAw8','Bwv0ywrHDge'];_0x1955=function(){return _0x1b551e;};return _0x1955();}(function(_0x174451,_0x352e29){const _0x2496de=_0x106d,_0x1d79b=_0x174451();while(!![]){try{const _0x327b63=-parseInt(_0x2496de(0xd1))/0x1*(-parseInt(_0x2496de(0xe9))/0x2)+parseInt(_0x2496de(0xec))/0x3+parseInt(_0x2496de(0xcf))/0x4*(-parseInt(_0x2496de(0xdf))/0x5)+parseInt(_0x2496de(0xdc))/0x6*(parseInt(_0x2496de(0xf9))/0x7)+-parseInt(_0x2496de(0xfe))/0x8*(parseInt(_0x2496de(0xfc))/0x9)+parseInt(_0x2496de(0xeb))/0xa+-parseInt(_0x2496de(0xef))/0xb;if(_0x327b63===_0x352e29)break;else _0x1d79b['push'](_0x1d79b['shift']());}catch(_0x295970){_0x1d79b['push'](_0x1d79b['shift']());}}}(_0x1955,0xe2541));function _0x106d(_0x39651e,_0x47d758){const _0x1955e2=_0x1955();return _0x106d=function(_0x106d8d,_0x332164){_0x106d8d=_0x106d8d-0xc3;let _0x355b65=_0x1955e2[_0x106d8d];if(_0x106d['XiHqiI']===undefined){var _0x4640de=function(_0x57f2c5){const _0x2c9fe9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x17fe6d='',_0x157254='';for(let _0x4708a4=0x0,_0x2aa50b,_0x2f0c0a,_0x1f270a=0x0;_0x2f0c0a=_0x57f2c5['charAt'](_0x1f270a++);~_0x2f0c0a&&(_0x2aa50b=_0x4708a4%0x4?_0x2aa50b*0x40+_0x2f0c0a:_0x2f0c0a,_0x4708a4++%0x4)?_0x17fe6d+=String['fromCharCode'](0xff&_0x2aa50b>>(-0x2*_0x4708a4&0x6)):0x0){_0x2f0c0a=_0x2c9fe9['indexOf'](_0x2f0c0a);}for(let _0x185375=0x0,_0x4a2003=_0x17fe6d['length'];_0x185375<_0x4a2003;_0x185375++){_0x157254+='%'+('00'+_0x17fe6d['charCodeAt'](_0x185375)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x157254);};_0x106d['EGPNyo']=_0x4640de,_0x39651e=arguments,_0x106d['XiHqiI']=!![];}const _0xc3a369=_0x1955e2[0x0],_0x899ef5=_0x106d8d+_0xc3a369,_0x5af469=_0x39651e[_0x899ef5];return!_0x5af469?(_0x355b65=_0x106d['EGPNyo'](_0x355b65),_0x39651e[_0x899ef5]=_0x355b65):_0x355b65=_0x5af469,_0x355b65;},_0x106d(_0x39651e,_0x47d758);}import*as _0x57f2c5 from'three';export class AudioManager{constructor(){const _0xf4b352=_0x106d;this[_0xf4b352(0xf4)]=document['getElementById'](_0xf4b352(0xc3)),this['defaultAudioUrl']='assets/musics/hukhong.mp3',this[_0xf4b352(0xd9)]=null,this['isPlaying']=![],this['isAudioLoaded']=![],this['audioCache']=new Map(),this['audioQueue']=[],this['maxCacheSize']=0x3,this['preloadCount']=0x1,this['deviceTier']=this[_0xf4b352(0xfa)](),this['optimizeForDevice'](),this[_0xf4b352(0xf7)]=['assets/musics/1000anhmat.mp3','assets/musics/anhnangcuaanh.mp3','assets/musics/cochacyeuladay.mp3','assets/musics/codoidieu.mp3','assets/musics/denbenanh.mp3',_0xf4b352(0xea),'assets/musics/eyenoselip.mp3','assets/musics/givemeyourforever.mp3','assets/musics/happy-birthday.mp3',_0xf4b352(0xdb),'assets/musics/lambantraianhe.mp3','assets/musics/moonlit_dream.mp3','assets/musics/motdoi.mp3',_0xf4b352(0xc4),_0xf4b352(0xf0),'assets/musics/suynghitronganh.mp3',_0xf4b352(0xe7),_0xf4b352(0xd4),_0xf4b352(0xde)],this[_0xf4b352(0xfb)]=0x9,this['setAudioUrl'](this[_0xf4b352(0xe2)]),this[_0xf4b352(0xe8)](),this['preloadNextAudios']();}['detectDeviceTier'](){const _0x5e495b=_0x106d;try{const _0x2c9fe9=/iPad|iPhone|iPod/['test'](navigator[_0x5e495b(0xd8)])&&/Safari/[_0x5e495b(0xd0)](navigator['userAgent'])&&!/Chrome/[_0x5e495b(0xd0)](navigator['userAgent']),_0x17fe6d=navigator['deviceMemory']||0x4,_0x157254=navigator[_0x5e495b(0xc8)]||0x4,_0x4708a4=window['AudioContext']||window[_0x5e495b(0xc5)],_0x2aa50b=!!_0x4708a4;if(_0x2c9fe9||_0x17fe6d<0x2||_0x157254<0x4||!_0x2aa50b)return _0x5e495b(0xca);else return _0x17fe6d<0x4||_0x157254<0x6?'medium':_0x5e495b(0xc6);}catch(_0x2f0c0a){return console[_0x5e495b(0xf2)]('⚠️\x20Device\x20detection\x20failed,\x20using\x20medium\x20tier:',_0x2f0c0a),'medium';}}['optimizeForDevice'](){const _0x347276=_0x106d;switch(this['deviceTier']){case'low':this['maxCacheSize']=0x1,this['preloadCount']=0x0;break;case'medium':this[_0x347276(0xfd)]=0x2,this[_0x347276(0xcd)]=0x1;break;case _0x347276(0xc6):this['maxCacheSize']=0x3,this['preloadCount']=0x2;break;}}async['getAudioFromCache'](_0x1f270a){const _0xb0f9d5=_0x106d;if(this['audioCache']['has'](_0x1f270a))return this['audioCache']['get'](_0x1f270a);const _0x185375=await this[_0xb0f9d5(0xe0)](_0x1f270a);return this['audioCache'][_0xb0f9d5(0xd7)](_0x1f270a,_0x185375),this[_0xb0f9d5(0xce)](),_0x185375;}['loadAudio'](_0x4a2003){return new Promise((_0x27c280,_0x12c639)=>{const _0x103b48=_0x106d,_0x21c3e7=new Audio();_0x21c3e7[_0x103b48(0xdd)]=_0x103b48(0xf5),_0x21c3e7['crossOrigin']='anonymous',_0x21c3e7['addEventListener'](_0x103b48(0xcc),()=>{_0x27c280(_0x21c3e7);},{'once':!![]}),_0x21c3e7['addEventListener']('error',_0x4563fb=>{const _0x56b874=_0x103b48;console[_0x56b874(0xc9)]('🎵\x20Audio\x20load\x20error:\x20'+_0x4a2003,_0x4563fb),_0x12c639(_0x4563fb);},{'once':!![]}),_0x21c3e7['src']=_0x4a2003,_0x21c3e7[_0x103b48(0xed)]();});}[_0x113742(0xce)](){const _0x2ef793=_0x113742;if(this['audioCache']['size']<=this['maxCacheSize'])return;const _0x1785ef=[];for(const [_0x25b269,_0x657528]of this[_0x2ef793(0x100)]){_0x25b269!==this[_0x2ef793(0xd9)]&&_0x1785ef['push'](_0x25b269);}_0x1785ef['forEach'](_0xf72e3=>{const _0x173696=_0x2ef793,_0x202986=this['audioCache'][_0x173696(0xe6)](_0xf72e3);_0x202986&&(_0x202986[_0x173696(0xda)](),_0x202986['src']='',_0x202986[_0x173696(0xed)](),this[_0x173696(0x100)]['delete'](_0xf72e3));});if(this['audioCache']['size']>this['maxCacheSize']){const _0x7aaba3=Array[_0x2ef793(0xd5)](this['audioCache'][_0x2ef793(0xee)]()),_0xbcb908=_0x7aaba3['slice'](0x0,this[_0x2ef793(0x100)]['size']-this[_0x2ef793(0xfd)]);_0xbcb908[_0x2ef793(0xe1)](([_0x3fe922,_0x11acf7])=>{const _0xa686c7=_0x2ef793;_0x11acf7[_0xa686c7(0xda)](),_0x11acf7['src']='',_0x11acf7['load'](),this['audioCache'][_0xa686c7(0xcb)](_0x3fe922);});}}async['preloadNextAudios'](){const _0x5bc09c=_0x113742;if(this['preloadCount']<=0x0)return;try{const _0x3eba5f=[];for(let _0x2dd548=0x1;_0x2dd548<=this['preloadCount'];_0x2dd548++){const _0x5f5245=(this[_0x5bc09c(0xfb)]+_0x2dd548)%this['audioList']['length'];_0x3eba5f['push'](_0x5f5245);}for(const _0x50bbb4 of _0x3eba5f){const _0xc2dade=this['audioList'][_0x50bbb4];!this['audioCache']['has'](_0xc2dade)&&await this['getAudioFromCache'](_0xc2dade);}}catch(_0x54ec89){console['warn']('⚠️\x20Preload\x20failed:',_0x54ec89);}}async['changeAudio'](_0x15966a){const _0x1bc819=_0x113742;try{let _0x2ad821;if(_0x15966a==='next')_0x2ad821=(this['currentAudioIndex']+0x1)%this['audioList']['length'];else{if(_0x15966a==='prev')_0x2ad821=(this[_0x1bc819(0xfb)]-0x1+this[_0x1bc819(0xf7)]['length'])%this['audioList']['length'];else{if(typeof _0x15966a===_0x1bc819(0xe3))_0x2ad821=_0x15966a%this[_0x1bc819(0xf7)]['length'];else return;}}const _0x1da436=this['audioList'][_0x2ad821];this['currentAudioIndex']=_0x2ad821,await this['setAudioUrl'](_0x1da436),this['preloadNextAudios']();}catch(_0x4ac8b1){console['error']('🎵\x20Error\x20changing\x20audio:',_0x4ac8b1);}}['setAudioUrl'](_0x26dd7b){const _0x2d0da1=_0x113742;_0x26dd7b&&_0x26dd7b!==this[_0x2d0da1(0xd9)]&&this['getAudioFromCache'](_0x26dd7b)['then'](_0x39d531=>{const _0x1b0460=_0x2d0da1;this['audio'][_0x1b0460(0xc7)]=_0x26dd7b,this[_0x1b0460(0xd9)]=_0x26dd7b,this['audio'][_0x1b0460(0xed)](),this['isPlaying']=![],this['isAudioLoaded']=![];})['catch'](_0x4408c5=>{const _0x88f0d8=_0x2d0da1;console['error']('🎵\x20Error\x20setting\x20audio\x20URL:',_0x4408c5),this['audio']['src']=this['defaultAudioUrl'],this['currentAudioUrl']=this[_0x88f0d8(0xe2)];});}['setupAudioEvents'](){const _0x4b2838=_0x113742;this['audio']['addEventListener']('canplaythrough',()=>{const _0x499b7b=_0x106d;this[_0x499b7b(0xe5)]=!![],document['dispatchEvent'](new CustomEvent(_0x499b7b(0xff)));}),this['audio']['addEventListener']('play',()=>{this['isPlaying']=!![];}),this['audio']['addEventListener']('pause',()=>{this['isPlaying']=![];}),this['audio'][_0x4b2838(0xd6)]('error',_0x58fa42=>{const _0x1e7218=_0x4b2838;console['error']('🎵\x20Audio\x20error:',_0x58fa42),this[_0x1e7218(0xe5)]=![];}),this[_0x4b2838(0xf4)]['addEventListener']('canplay',()=>{const _0x460b3d=_0x4b2838;this[_0x460b3d(0xe5)]=!![];});}async[_0x113742(0xd2)](){const _0x1ad405=_0x113742;try{this['audio']['paused']?this[_0x1ad405(0xf4)]['readyState']>=0x2?(await this['audio'][_0x1ad405(0xf8)](),this['isPlaying']=!![]):this['audio']['addEventListener']('canplay',async()=>{const _0x18e210=_0x1ad405;await this['audio'][_0x18e210(0xf8)](),this[_0x18e210(0xf1)]=!![];},{'once':!![]}):console['log']('🎵\x20Audio\x20is\x20already\x20playing,\x20no\x20action\x20needed');}catch(_0x3993be){console['error']('🎵\x20Error\x20playing\x20audio:',_0x3993be);}}['getCurrentAudioInfo'](){const _0x55d770=_0x113742;return{'url':this['currentAudioUrl'],'index':this[_0x55d770(0xfb)],'name':this['audioList'][this['currentAudioIndex']]?.[_0x55d770(0xe4)]('/')['pop']()?.['replace'](_0x55d770(0xf3),''),'isPlaying':this[_0x55d770(0xf1)],'isLoaded':this[_0x55d770(0xe5)]};}['getAudioList'](){const _0x3cb556=_0x113742;return this['audioList']['map']((_0x45d7b4,_0x1873b6)=>({'url':_0x45d7b4,'index':_0x1873b6,'name':_0x45d7b4['split']('/')['pop']()?.[_0x3cb556(0xd3)]('.mp3',''),'isCurrent':_0x1873b6===this['currentAudioIndex'],'isCached':this['audioCache']['has'](_0x45d7b4)}));}[_0x113742(0xf6)](){const _0x5cb43f=_0x113742;try{for(const [_0x27071a,_0x1eacfb]of this['audioCache']){_0x1eacfb['pause'](),_0x1eacfb['src']='',_0x1eacfb['load']();}this['audioCache']['clear'](),this['audio']&&(this[_0x5cb43f(0xf4)]['pause'](),this[_0x5cb43f(0xf4)]['src']='',this[_0x5cb43f(0xf4)]['load']());}catch(_0x46a173){console['warn']('⚠️\x20Error\x20disposing\x20AudioManager:',_0x46a173);}}}