function _0x22af() {
    const _0x522349 = ['nNH3v3LUAG', 'tMJHUQ1WihrPCcaOvK7eKcK', 'zgLZy291BNrwywX1zq', 'BMfTzq', 'zgf0yq', 'BwLU', 'ifvtrdWVC3bHBJ4kicaGicaGicaGia', 'mteWmtaXmhD3yMPkEG', 'XjbHBMCGDog6O2KGDM91y2HLCI4UlG', 'pc9ZCgfUpGOGicaGicaGicaGpc9KAxy+cIaGicaGicaG', 'iJ4kicaGicaGica8Aw5WDxqGy2XHC3m9icjJAgvJA2jVEciGDhLWzt0Iy2HLy2TIB3GIig5HBwu9iNzVDwnOzxiIigLKpsj2B3vJAgvYxW', 'Dg90ywXqCMLJzq', 'DMfSDwu', 'y2HLy2TLza', 'pc9IpIaTieDP4BQJBtOG', 'mxnUtgjyAG', 'ifzoXja8l3nWyw4+iaOGicaGicaGicaGica8C3bHBIbZDhLSzt0IzM9UDc1ZAxPLoJe0ChG7y29SB3i6iZG4odSIpG', 'Cgf5BwvUDe1LDgHVzfnLy3rPB24', 'mtaWma', 'z2v0rwXLBwvUDej5swq', 'DxnLCL91Awq', 'Aw5Uzxjive1m', 'nZa4mdK0tu51yK9S', 'l2fWAs92B3vJAgvYCY9ZyxzLzc8', 'BwvZC2fNzq', 'iJ4kicaGicaGica8BgfIzwWGzM9Ypsj2B3vJAgvYxW', 'mJe5CxHMyM56', 'DM91y2HLCLjLC3vSDa', 'phnWyw4GC3r5Bgu9iMnVBg9YoInLntm5mZu7iJ5c4BQHBIbJ4BQNBIdeKCsdBMCGBMJHUQ1Wimsr4BUdihHLBsb2B3vJAgvYitWVC3bHBJ4', 'ntCYndiZnLjVyLrHqW', 'nJC2mdrfse5PuKy', 'cIaGicaGicaGica8zgL2ihn0EwXLpsjTyxjNAw4TyM90Dg9ToIa4ChG7iJ4kicaGicaGicaGicaGphnWyw4GC3r5Bgu9iMnVBg9YoInLntm5mZu7iJ4', 'zgLZCgXHEq', 'mtCXodaZmdb5CfDlzgu', 'mtaW', 'cIaGicaGicaGpgrPDIbZDhLSzt0IBwfYz2LUlwjVDhrVBtOGohb4oYi+cIaGicaGicaGica8C3bHBIbZDhLSzt0Iy29SB3i6iZrLy2rJndTMB250lxnPEMu6mtzWEdTMB250lxDLAwDODdPIB2XKoYi+ja', 'ndmXnJG4mg5YwLjxqG', 'C3rLCa', 'cIaGicaGicaGica8l2rPDJ4kicaGicaGica', 'nJG1mdmWnujHAxfWBq', 'ANnVBG'];
    _0x22af = function() {
        return _0x522349;
    };
    return _0x22af();
}(function(_0xf8070, _0x29e43c) {
    const _0x11c132 = _0x22b9,
        _0x56100e = _0xf8070();
    while (!![]) {
        try {
            const _0x230cdf = -parseInt(_0x11c132(0x1b4)) / 0x1 * (-parseInt(_0x11c132(0x1bb)) / 0x2) + -parseInt(_0x11c132(0x1bf)) / 0x3 * (-parseInt(_0x11c132(0x1c3)) / 0x4) + -parseInt(_0x11c132(0x1ac)) / 0x5 * (-parseInt(_0x11c132(0x1ce)) / 0x6) + parseInt(_0x11c132(0x1c2)) / 0x7 + parseInt(_0x11c132(0x1c9)) / 0x8 + -parseInt(_0x11c132(0x1cc)) / 0x9 + -parseInt(_0x11c132(0x1c6)) / 0xa;
            if (_0x230cdf === _0x29e43c) break;
            else _0x56100e['push'](_0x56100e['shift']());
        } catch (_0x37ad4f) {
            _0x56100e['push'](_0x56100e['shift']());
        }
    }
}(_0x22af, 0xa787d));
import {
    SERVER_URL_PROD
} from './config.js';
let selectedVoucher = null,
    vouchers = [],
    finalPrice = 0x0;

function _0x22b9(_0x532e5d, _0x471fb3) {
    const _0x22af3e = _0x22af();
    return _0x22b9 = function(_0x22b9f9, _0x404b48) {
        _0x22b9f9 = _0x22b9f9 - 0x1a6;
        let _0x503557 = _0x22af3e[_0x22b9f9];
        if (_0x22b9['BBAARP'] === undefined) {
            var _0x5dcd41 = function(_0x2b5a71) {
                const _0x485429 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';
                let _0x2a2d7b = '',
                    _0x3c167e = '';
                for (let _0x15f2e7 = 0x0, _0x36062f, _0x5bdfc2, _0x4ab246 = 0x0; _0x5bdfc2 = _0x2b5a71['charAt'](_0x4ab246++); ~_0x5bdfc2 && (_0x36062f = _0x15f2e7 % 0x4 ? _0x36062f * 0x40 + _0x5bdfc2 : _0x5bdfc2, _0x15f2e7++ % 0x4) ? _0x2a2d7b += String['fromCharCode'](0xff & _0x36062f >> (-0x2 * _0x15f2e7 & 0x6)) : 0x0) {
                    _0x5bdfc2 = _0x485429['indexOf'](_0x5bdfc2);
                }
                for (let _0xbc010a = 0x0, _0x3c2924 = _0x2a2d7b['length']; _0xbc010a < _0x3c2924; _0xbc010a++) {
                    _0x3c167e += '%' + ('00' + _0x2a2d7b['charCodeAt'](_0xbc010a)['toString'](0x10))['slice'](-0x2);
                }
                return decodeURIComponent(_0x3c167e);
            };
            _0x22b9['GbhFsH'] = _0x5dcd41, _0x532e5d = arguments, _0x22b9['BBAARP'] = !![];
        }
        const _0x13e11c = _0x22af3e[0x0],
            _0x1097f4 = _0x22b9f9 + _0x13e11c,
            _0x5bcf3 = _0x532e5d[_0x1097f4];
        return !_0x5bcf3 ? (_0x503557 = _0x22b9['GbhFsH'](_0x503557), _0x532e5d[_0x1097f4] = _0x503557) : _0x503557 = _0x5bcf3, _0x503557;
    }, _0x22b9(_0x532e5d, _0x471fb3);
}
export function updateTotalPrice(_0x2b5a71) {
    const _0x189965 = _0x22b9,
        _0x485429 = document['getElementById'](_0x189965(0x1b0)),
        _0x2a2d7b = document[_0x189965(0x1b8)]('tipAmount'),
        _0x3c167e = _0x2a2d7b ? parseInt(_0x2a2d7b['value'], 0xa) || 0x0 : 0x0;
    let _0x15f2e7 = typeof _0x2b5a71 === 'function' ? _0x2b5a71() : 0x0,
        _0x36062f = _0x15f2e7 + _0x3c167e;
    if (selectedVoucher) {
        const _0x3c2924 = Math['round'](_0x15f2e7 * selectedVoucher['discountValue'] / 0x64);
        finalPrice = _0x36062f - _0x3c2924;
    } else finalPrice = _0x36062f;
    const _0x5bdfc2 = document['querySelector']('input[name=\x22paymentMethod\x22][value=\x22PAYPAL\x22]'),
        _0x4ab246 = _0x5bdfc2 ? _0x5bdfc2['checked'] : ![];
    _0x2a2d7b && (_0x4ab246 ? (_0x2a2d7b['placeholder'] = 'Nhập\x20tip\x20(USD)', _0x2a2d7b['step'] = '1', _0x2a2d7b[_0x189965(0x1aa)] = '0', _0x2a2d7b['max'] = _0x189965(0x1c7)) : (_0x2a2d7b['placeholder'] = _0x189965(0x1a6), _0x2a2d7b[_0x189965(0x1ca)] = _0x189965(0x1b7), _0x2a2d7b['min'] = '0', _0x2a2d7b['max'] = '1000000'));
    if (_0x485429) {
        if (finalPrice === 0x0) _0x485429['innerHTML'] = '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x208px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:#e53935;\x22>0\x20VNĐ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20';
        else {
            if (_0x4ab246) {
                const _0x3c6ff3 = _0x3c167e,
                    _0x58ef58 = 0x5 + _0x3c6ff3;
                _0x485429['innerHTML'] = _0x189965(0x1c8) + _0x58ef58 + _0x189965(0x1ab) + (_0x3c6ff3 > 0x0 ? '\x20<span\x20style=\x22font-size:14px;color:#888;\x22>(tip\x20$' + _0x3c6ff3 + '\x20USD)</span>' : '') + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20';
            } else {
                if (selectedVoucher) {
                    const _0x51d5cf = '(giảm\x20' + selectedVoucher['discountValue'] + '%\x20=\x20-' + Math['round'](_0x15f2e7 * selectedVoucher[_0x189965(0x1a7)] / 0x64)['toLocaleString']() + 'đ)';
                    _0x485429[_0x189965(0x1ba)] = _0x189965(0x1c4) + finalPrice['toLocaleString']() + _0x189965(0x1b5) + _0x51d5cf + (_0x3c167e > 0x0 ? ',\x20tip\x20' + _0x3c167e['toLocaleString']() + '\x20VNĐ' : '') + _0x189965(0x1ae);
                } else _0x485429['innerHTML'] = _0x189965(0x1c4) + finalPrice['toLocaleString']() + '\x20VNĐ</span>' + (_0x3c167e > 0x0 ? '\x20<span\x20style=\x22font-size:14px;color:#888;\x22>(tip\x20' + _0x3c167e['toLocaleString']() + '\x20VNĐ)</span>' : '') + _0x189965(0x1cb);
            }
        }
    }
    const _0xbc010a = document[_0x189965(0x1b8)](_0x189965(0x1b6));
    _0xbc010a && (finalPrice > 0x0 ? _0xbc010a['style']['display'] = 'block' : _0xbc010a['style']['display'] = 'none');
}
export async function loadUserVouchers(_0xa7f789) {
    const _0x755ec0 = _0x22b9,
        _0x5800b7 = document[_0x755ec0(0x1b8)]('voucherList'),
        _0x31db27 = document[_0x755ec0(0x1b8)](_0x755ec0(0x1c0));
    if (!_0x5800b7) return;
    _0x5800b7['innerHTML'] = _0x755ec0(0x1ad);
    if (_0x31db27) _0x31db27['style'][_0x755ec0(0x1c5)] = 'none';
    selectedVoucher = null, vouchers = [], updateTotalPrice(_0xa7f789);
    const _0x46845d = localStorage['getItem'](_0x755ec0(0x1b9));
    if (!_0x46845d) {
        _0x5800b7['innerHTML'] = _0x755ec0(0x1c1);
        return;
    }
    try {
        const _0x472112 = await fetch(SERVER_URL_PROD + _0x755ec0(0x1bc) + _0x46845d),
            _0x2fdbbe = await _0x472112[_0x755ec0(0x1cd)]();
        if (!_0x2fdbbe['success']) {
            _0x5800b7['innerHTML'] = '<span\x20style=\x22color:#e53935;\x22>' + _0x2fdbbe[_0x755ec0(0x1bd)] + '</span>';
            return;
        }
        if (!_0x2fdbbe[_0x755ec0(0x1a9)]['length']) {
            _0x5800b7['innerHTML'] = '<span\x20style=\x22color:#888;\x22>Bạn\x20không\x20có\x20voucher\x20nào\x20cả!</span>';
            return;
        }
        vouchers = _0x2fdbbe[_0x755ec0(0x1a9)], _0x5800b7['innerHTML'] = vouchers['map']((_0x41e202, _0x3df098) => '\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22voucher-item\x22\x20data-idx=\x22' + _0x3df098 + _0x755ec0(0x1af) + _0x3df098 + _0x755ec0(0x1be) + _0x3df098 + '\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<b>' + _0x41e202['code'] + _0x755ec0(0x1b3) + _0x41e202['discountValue'] + '%\x20|\x20HSD:\x20' + new Date(_0x41e202['expiredAt'])['toLocaleDateString']() + '\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20')['join'](''), selectedVoucher = null, updateTotalPrice(_0xa7f789);
    } catch (_0x3bf278) {
        _0x5800b7[_0x755ec0(0x1ba)] = '<span\x20style=\x22color:#e53935;\x22>Không\x20thể\x20tải\x20voucher!</span>';
    }
}
export function setupVoucherListeners(_0x586b55) {
    const _0x2abef0 = _0x22b9,
        _0x1a6ec6 = document[_0x2abef0(0x1b8)]('voucherList');
    _0x1a6ec6 && _0x1a6ec6['addEventListener']('change', _0x1d03af => {
        const _0x2b7fa4 = _0x2abef0;
        if (_0x1d03af['target'][_0x2b7fa4(0x1a8)] === 'voucher') {
            const _0x55a3fd = _0x1a6ec6['querySelectorAll']('input[name=\x22voucher\x22]'),
                _0x52aabc = Array['from'](_0x55a3fd)['findIndex'](_0x3adacb => _0x3adacb === _0x1d03af['target']);
            _0x1d03af['target']['checked'] ? (_0x55a3fd['forEach']((_0x4f5ba4, _0x1b22a6) => _0x4f5ba4[_0x2b7fa4(0x1b2)] = _0x1b22a6 === _0x52aabc), selectedVoucher = vouchers[_0x52aabc]) : selectedVoucher = null, updateTotalPrice(_0x586b55);
        }
    });
    const _0x4ba555 = document[_0x2abef0(0x1b8)]('tipAmount');
    _0x4ba555 && _0x4ba555['addEventListener']('input', () => {
        const _0x3b8dd4 = _0x2abef0;
        let _0x1e962a = parseInt(_0x4ba555['value'], 0xa) || 0x0;
        _0x1e962a < 0x0 && (_0x1e962a = 0x0, _0x4ba555[_0x3b8dd4(0x1b1)] = 0x0), _0x1e962a > 0xf4240 && (_0x1e962a = 0xf4240, _0x4ba555['value'] = 0xf4240), updateTotalPrice(_0x586b55);
    });
}
export function getSelectedVoucherCode() {
    return selectedVoucher ? selectedVoucher['code'] : null;
}
export function getSelectedVoucherInfo() {
    return selectedVoucher ? {
        'code': selectedVoucher['code'],
        'discountValue': selectedVoucher['discountValue'],
        'expiredAt': selectedVoucher['expiredAt']
    } : null;
}
export function getFinalPrice() {
    return finalPrice;
}